<%- model_class = Order -%>
<div class="page-header">
  <h1>Pedidos</h1>
</div>
<table class="table table-striped" id="orders_table">
  <thead>
    <tr>
      <th>Pedido</th>
      <th><%= model_class.human_attribute_name (:client)%></th>
      <th><%= model_class.human_attribute_name (:vendor)%></th>
      <th><%= model_class.human_attribute_name (:date)%></th>
      <th><%= model_class.human_attribute_name (:total)%></th>
      <th><%= model_class.human_attribute_name (:state)%></th>
      <th>Ações</th>
    </tr>
  </thead>

  <tbody>
    <% @orders.each do |order| %>
      <tr>
        <td><%= order.id %></td>
        <td><%= order.client_name %></td>
        <td><%= order.vendor_name %></td>
        <td><%= l order.date %></td>
        <td><%= number_to_currency order.total %></td>
        <td><%= order.human_state_name %></td>
        
        <td>
          <% unless order.cancel? or order.delivered? or order.ready? %>
            <%= link_to ' Editar', edit_order_path(order), :class => 'fa fa-edit btn btn-sm btn-primary' %> 
          
            <%= link_to ' Apagar', order, 
              method: :delete, 
              data: { confirm: 'Tem certeza que deseja excluir?' },
              :class => 'fa fa-trash-o btn btn-sm btn-danger' %>

            <%= link_to " Impr", print_order_path(order), class: 'fa fa-print btn btn-default btn-sm' %>  
          <% end %>

          <% if order.ready? || order.delivered? %>
            <%= link_to " Impr", print_done_order_path(order), class: 'fa fa-print btn btn-default btn-sm'%>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'Novo', new_order_path, :class => 'btn btn-primary btn-lg', :role => "button"  %>
